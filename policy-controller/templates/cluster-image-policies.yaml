{{- if .Values.cip.create -}}
---
apiVersion: policy.sigstore.dev/v1beta1
kind: ClusterImagePolicy
metadata:
  name: image-policy
spec:
  images:
  - glob: "**"
  - glob: "index.docker.io/alpine**"
  - glob: "index.docker.io/google**"
  authorities:
    - static:
        action: pass
---
apiVersion: policy.sigstore.dev/v1alpha1
kind: ClusterImagePolicy
metadata:
  name: cip-key-secret-common
  annotations:
    argocd.argoproj.io/sync-wave: "-100"
spec:
  images:
    - glob: "test/test**"
  authorities:
    - key:
        secretRef:
          name: cosignsecret
{{- end }}
